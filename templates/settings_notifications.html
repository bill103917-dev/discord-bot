<form method="POST" id="notification-form" action="{{ url_for('settings', guild_id=guild_obj.id, module='notifications') }}">
    <input type="hidden" name="module" value="notifications">
    
    <div class="alert alert-warning" role="alert">
        ⚠️ **注意：** 這些設定是透過 Webhook API 整合來運作的。
    </div>

    <div class="form-group mb-3">
        <label for="video_channel_id" class="form-label">選擇影片/直播通知頻道:</label>
        <select class="form-control" id="video_channel_id" name="video_channel_id">
            <option value="">(不發送任何通知)</option>
            {% for channel in channels %}
                {% if channel.type.name == 'text' %}
                    <option value="{{ channel.id }}" {% if channel.id|string == video_channel_id %}selected{% endif %}>
                        #{{ channel.name }}
                    </option>
                {% endif %}
            {% endfor %}
        </select>
        <div class="form-text">選擇發布 YouTube 影片和直播通知的頻道。</div>
    </div>

    <div class="form-group mb-3">
        <label for="video_message" class="form-label">影片通知訊息模板:</label>
        <textarea class="form-control" id="video_message" name="video_message" rows="4">{{ video_message }}</textarea>
        <div class="form-text">可用變數：<code>{title}</code> (標題), <code>{channel}</code> (頻道名稱), <code>{link}</code> (連結)。</div>
    </div>
    
    <div class="form-group mb-3">
        <label for="live_message" class="form-label">直播通知訊息模板:</label>
        <textarea class="form-control" id="live_message" name="live_message" rows="4">{{ live_message }}</textarea>
        <div class="form-text">可用變數：<code>{title}</code> (標題), <code>{channel}</code> (頻道名稱), <code>{link}</code> (連結)。</div>
    </div>
    
    <h5 class="mt-4">附加通知設定 (Webhook)</h5>
    <div class="row">
        <div class="col-md-6">
            <div class="form-group mb-3">
                <label for="ping_role" class="form-label">通知時 Ping 角色/文字:</label>
                <input type="text" class="form-control" id="ping_role" name="ping_role" value="{{ ping_role }}">
                <div class="form-text">例如：`@everyone`, `<@&1234567890>`, 或 `重要提醒`</div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group mb-3">
                <label for="content_filter" class="form-label">發送內容過濾:</label>
                <input type="text" class="form-control" id="content_filter" name="content_filter" value="{{ content_filter }}">
                <div class="form-text">用逗號分隔：`Videos`, `Livestreams`。留空則不發送。</div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">關閉</button>
        <button type="submit" class="btn btn-primary">💾 儲存設定</button>
    </div>
</form>
