<div class="modal-header" style="background-color: #2f3136; border-bottom: 1px solid #4f545c;">
    <h5 class="modal-title" style="color: #fff;">ç·¨è¼¯é »é“è¨­å®š</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: #b9bbbe;">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body" style="background-color: #36393f; padding-bottom: 0;">
    <form id="notificationForm" method="POST" action="{{ url_for('settings', guild_id=guild_obj.id, module='notifications') }}">
        
        <!-- é »é“ç¶²å€å’Œç‹€æ…‹ -->
        <div class="row">
            <div class="col-md-6 form-group">
                <label for="channel_url" class="required-label">é »é“ç¶²å€ (Channel URL)</label>
                <input type="text" id="channel_url" name="channel_url" class="form-control" 
                       value="{{ channel_url_value }}" placeholder="ä¾‹å¦‚: https://youtube.com/@ChannelName">
            </div>
            <div class="col-md-6 form-group">
                <label for="channel_status">é »é“ç‹€æ…‹ (Channel Status)</label>
                <select id="channel_status" name="channel_status" class="form-control">
                    <option value="Running" {% if channel_status_value == 'é‹è¡Œä¸­ (Running)' or channel_status_value == 'Running' %}selected{% endif %}>é‹è¡Œä¸­ (Running)</option>
                    <option value="Paused" {% if channel_status_value == 'å·²æš«åœ (Paused)' or channel_status_value == 'Paused' %}selected{% endif %}>å·²æš«åœ (Paused)</option>
                </select>
            </div>
        </div>
        
        <!-- ğŸŒŸ ä¿®æ­£é»: é‡æ–°æ’å…¥é »é“é¸æ“‡ä¸‹æ‹‰é¸å–® ğŸŒŸ -->
        <div class="form-group mb-3">
            <label for="video_channel_id" class="form-label required-label">é¸æ“‡å½±ç‰‡/ç›´æ’­é€šçŸ¥é »é“:</label>
            <select class="form-control" id="video_channel_id" name="video_channel_id">
                <option value="">(ä¸ç™¼é€ä»»ä½•é€šçŸ¥)</option>
                {% for channel in channels %}
                    {% if channel.type.name == 'text' %}
                        <option value="{{ channel.id }}" {% if channel.id|string == video_channel_id|string %}selected{% endif %}>
                            #{{ channel.name }}
                        </option>
                    {% endif %}
                {% endfor %}
            </select>
            <small class="form-text text-muted">é¸æ“‡ç™¼å¸ƒ YouTube å½±ç‰‡å’Œç›´æ’­é€šçŸ¥çš„é »é“ã€‚</small>
        </div>
        <!-- ğŸŒŸ çµæŸä¿®æ­£é» ğŸŒŸ -->

        <!-- Ping Role -->
        <div class="row">
            <div class="col-md-6 form-group">
                <label for="ping_role">æ¨™è¨˜èº«åˆ†çµ„ (Ping Role)</label>
                <!-- å‡è¨­ ping_role ä¹Ÿæ˜¯å¾å¾Œç«¯è¼‰å…¥çš„æŒä¹…åŒ–è®Šæ•¸ -->
                <input type="text" id="ping_role" name="ping_role" class="form-control" value="{{ ping_role or '@everyone' }}" placeholder="ä¾‹å¦‚ @everyone æˆ– èº«åˆ†çµ„ ID/åç¨±">
            </div>
        </div>
        
        <!-- Embed and Bot Style -->
        <div class="row">
            <div class="col-md-6 form-group">
                <label for="embed_style">åµŒå…¥æ¨£å¼ (Embed) â­ BASIC</label>
                <select id="embed_style" name="embed_style" class="form-control">
                    <option selected>é è¨­ (Default)</option>
                    <option>ç°¡æ½” (Simple)</option>
                </select>
            </div>
            <div class="col-md-6 form-group">
                <label for="bot_style">æ©Ÿå™¨äººé¢¨æ ¼ (Bot Style) â­ BASIC</label>
                <select id="bot_style" name="bot_style" class="form-control">
                    <option selected>é è¨­ (Default)</option>
                    <option>ç°¡æ½” (Minimal)</option>
                </select>
            </div>
        </div>

        <!-- Content Filter -->
        <div class="form-group mt-3">
            <label>å…§å®¹é¡å‹ç¯©é¸ (Content Type Filter)</label>
            <div class="btn-group w-100" role="group" aria-label="Content Filter">
                <input type="checkbox" id="filter_videos" name="content_filter" value="Videos" class="btn-check" checked>
                <label class="btn btn-dark content-filter-btn" for="filter_videos">å½±ç‰‡ (Videos)</label>
                
                <input type="checkbox" id="filter_streams" name="content_filter" value="Livestreams" class="btn-check" checked>
                <label class="btn btn-dark content-filter-btn" for="filter_streams">ç›´æ’­ (Livestreams)</label>

                <input type="checkbox" id="filter_shorts" name="content_filter" value="Shorts" class="btn-check">
                <label class="btn btn-dark content-filter-btn" for="filter_shorts">çŸ­ç‰‡ (Shorts)</label>
            </div>
        </div>

        <hr style="border-top: 1px solid #4f545c;">

        <!-- Message Templates -->
        <div class="row">
            <div class="col-md-6 form-group">
                <label for="video_message" class="required-label">å½±ç‰‡è¨Šæ¯ (Video Message) â“˜</label>
                <textarea id="video_message" name="video_message" class="form-control" rows="4">{{ video_message or "{channel} ä¸Šæ–°å½±ç‰‡å•¦ï¼\n{title}" }}</textarea>
                <small class="form-text text-muted">è®Šæ•¸: {channel}, {title}, {link}</small>
            </div>
            <div class="col-md-6 form-group">
                <label for="live_message" class="required-label">ç›´æ’­è¨Šæ¯ (Live Message) â“˜</label>
                <textarea id="live_message" name="live_message" class="form-control" rows="4">{{ live_message or "{channel} é–‹æ’­å•¦\n{title}" }}</textarea>
                <small class="form-text text-muted">è®Šæ•¸: {channel}, {title}, {link}</small>
            </div>
        </div>

        <input type="hidden" name="guild_id" value="{{ guild_obj.id }}">

    </form>
</div>
<div class="modal-footer" style="background-color: #36393f; border-top: none;">
    <button type="button" class="btn btn-secondary" data-dismiss="modal">å–æ¶ˆ (Cancel)</button>
    <button type="submit" form="notificationForm" class="btn btn-primary" id="updateChannelBtn">æ›´æ–°é »é“ (Update Channel)</button>
</div>

<style>
    .modal-content { background-color: #36393f; }
    .form-control {
        background-color: #40444b;
        border: 1px solid #202225;
        color: #dcddde;
    }
    .form-control:focus {
        background-color: #40444b;
        border-color: #5865f2;
        box-shadow: 0 0 0 0.2rem rgba(88, 101, 242, 0.25);
    }
    .btn-dark {
        background-color: #2f3136;
        border: 1px solid #4f545c;
        color: #dcddde;
    }
    .btn-dark:hover { background-color: #40444b; }
    
    /* ç¯©é¸æŒ‰éˆ•æ¨£å¼ */
    .btn-group .btn-check + .content-filter-btn {
        flex-grow: 1;
        text-align: center;
        padding: 8px 15px;
        border-radius: 4px;
        cursor: pointer;
        background-color: #40444b;
        border: 1px solid #4f545c;
        color: #dcddde;
        margin: 0 2px;
    }
    .btn-group .btn-check:checked + .content-filter-btn {
        background-color: #5865f2; /* è—è‰²é¸ä¸­ */
        border-color: #5865f2;
        color: #fff;
    }
    .required-label:after {
        content: " *";
        color: #f04747; /* å¿…å¡«æ¨™è¨˜ */
    }
    #updateChannelBtn {
        background-color: #5865f2;
        border-color: #5865f2;
    }
</style>